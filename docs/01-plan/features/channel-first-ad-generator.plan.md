# Plan: Channel-First Ad Generator v2.0

> **핵심 철학**: 채널을 먼저, 채널에 깊이 있게

## 1. 문제 정의

### 1.1 현재 솔루션의 한계

| 문제 | 현상 | 영향 |
|------|------|------|
| **채널 무차별 접근** | 여러 채널을 동시에 선택하고 비슷한 소재 생성 | 각 채널의 특성을 살리지 못함 |
| **얕은 채널 분석** | 해상도와 기본 가이드라인만 고려 | 채널별 알고리즘, 트렌드 미반영 |
| **선형적 워크플로우** | 분석→컨셉→생성 일방통행 | 채널 특성에 맞춘 유연성 부족 |
| **일반화된 컨셉** | 모든 채널에 같은 컨셉 적용 | 채널별 최적화된 크리에이티브 부재 |
| **결과물 품질** | 해상도만 다른 비슷한 이미지들 | 채널 네이티브 느낌 부족 |

### 1.2 사용자 페인포인트

```
"인스타에서 잘 되는 광고랑 틱톡에서 잘 되는 광고는 완전히 다른데,
지금 도구는 그냥 사이즈만 다르게 나오네요."

"각 채널 담당자한테 줄 때마다 다시 수정해달라고 요청 받아요.
채널별로 톤이 안 맞는다고..."

"유튜브 쇼츠랑 틱톡이 비슷해 보이지만 실제로는 다르거든요.
그런 디테일이 반영됐으면 좋겠어요."
```

## 2. 솔루션 비전

### 2.1 핵심 가치 제안

> **"채널 전문가가 만든 것 같은 광고 소재"**

각 채널을 선택하면, 그 채널의 전문 마케터가 옆에 앉아있는 것처럼
- 그 채널에서 지금 뭐가 뜨는지 알려주고
- 그 채널의 알고리즘이 좋아하는 게 뭔지 분석하고
- 그 채널에서 잘 먹히는 포맷과 스타일로 소재를 만들어준다

### 2.2 새로운 플로우

```
┌─────────────────────────────────────────────────────────────┐
│                   NEW: 채널 중심 플로우                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  STEP 1: 채널 선택 (단일)                                   │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🎯 "어떤 채널에서 광고하고 싶으세요?"               │   │
│  │                                                      │   │
│  │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  │   │
│  │  │ IG   │  │ TikTok│  │Threads│  │ YT   │  │ FB   │  │   │
│  │  │ Feed │  │      │  │      │  │Shorts│  │ Ads  │  │   │
│  │  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘  │   │
│  │                                                      │   │
│  │  각 채널 카드에:                                     │   │
│  │  - 채널 특성 한 줄 요약                             │   │
│  │  - 추천 활용처 (인지도/전환/참여)                   │   │
│  │  - 오늘의 트렌드 키워드 미리보기                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  STEP 2: 채널 심층 분석                                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 "[채널명] 완전 정복 가이드"                      │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 🔥 지금 이 채널에서 뜨는 것들                │    │   │
│  │  │  - 트렌드 포맷: 비포/애프터, 말풍선 밈 등   │    │   │
│  │  │  - 인기 오디오/음악 스타일                  │    │   │
│  │  │  - 바이럴 콘텐츠 패턴                       │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 🎯 알고리즘이 좋아하는 것들                  │    │   │
│  │  │  - 최적 영상/이미지 길이                    │    │   │
│  │  │  - 초반 3초 훅 전략                         │    │   │
│  │  │  - 해시태그/캡션 전략                       │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ ✅ 성공 사례 레퍼런스                        │    │   │
│  │  │  - 비슷한 업종의 성공 광고 스타일 분석      │    │   │
│  │  │  - 어떤 요소가 효과적이었는지               │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  STEP 3: 브랜드 정보 입력 (간소화)                         │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📝 브랜드/제품 정보                                 │   │
│  │                                                      │   │
│  │  브랜드명: [_______________]                        │   │
│  │  한 줄 소개: [_______________]                      │   │
│  │  핵심 셀링포인트: [_______________]                 │   │
│  │  타겟 연령대: [20-30대 ▼]                           │   │
│  │                                                      │   │
│  │  💡 채널 분석 기반 자동 추천:                       │   │
│  │  "이 채널에서는 [감성적인 스토리텔링]이 효과적입니다"│   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  STEP 4: 채널 맞춤 컨셉 생성                               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💡 "[채널]에서 먹히는 컨셉 3가지"                   │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 컨셉 A: "비포/애프터 변신"                   │    │   │
│  │  │ 📌 이 채널 적합도: ★★★★★                    │    │   │
│  │  │ 📌 예상 참여율: 높음                        │    │   │
│  │  │ 📌 레퍼런스: @브랜드 유사 성공 사례         │    │   │
│  │  │                                              │    │   │
│  │  │ [미리보기] - 실제 생성될 스타일 썸네일      │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  (컨셉 B, C도 비슷한 구조)                          │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  STEP 5: 소재 생성 & 최적화                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🎨 채널 네이티브 소재 생성                         │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 메인 이미지/영상 (채널 최적 포맷)           │    │   │
│  │  │  - 채널별 추천 필터/효과 자동 적용          │    │   │
│  │  │  - 트렌드 요소 반영                         │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 카피 (채널 톤앤매너)                        │    │   │
│  │  │  - 메인 훅 (초반 3초용)                     │    │   │
│  │  │  - 본문 카피                                │    │   │
│  │  │  - 해시태그 세트                            │    │   │
│  │  │  - CTA 문구                                 │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 📊 예상 성과 분석                           │    │   │
│  │  │  - 예상 노출수/참여율 범위                  │    │   │
│  │  │  - 최적 게시 시간대 추천                    │    │   │
│  │  │  - A/B 테스트 제안                          │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│                           ▼                                 │
│  STEP 6: 결과 & 다음 채널                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  ✅ 완료! 다음은?                                    │   │
│  │                                                      │   │
│  │  [📥 다운로드]  [🔄 다른 버전]  [➕ 다른 채널 추가]  │   │
│  │                                                      │   │
│  │  💡 이 컨셉으로 다른 채널도 만들어볼까요?           │   │
│  │  [TikTok 버전 만들기] [YouTube Shorts 버전 만들기]  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 3. 핵심 기능 상세

### 3.1 채널별 심층 분석 엔진 (핵심 고도화)

> **핵심 원칙**: 분석 결과가 컨셉 생성에 직접 반영되어야 한다

#### 3.1.1 분석 아키텍처

```
┌─────────────────────────────────────────────────────────────────────┐
│                    채널 심층 분석 엔진 v2.0                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    INPUT LAYER                               │   │
│  │  • 선택된 채널 (단일)                                       │   │
│  │  • 브랜드/제품 정보                                         │   │
│  │  • 타겟 오디언스                                            │   │
│  │  • 캠페인 목표                                              │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                 ANALYSIS MODULES (병렬 실행)                 │   │
│  │                                                              │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │   │
│  │  │   실시간     │  │   경쟁사/    │  │   타겟       │       │   │
│  │  │   트렌드     │  │   성공사례   │  │   오디언스   │       │   │
│  │  │   분석       │  │   분석       │  │   심층분석   │       │   │
│  │  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘       │   │
│  │         │                 │                 │                │   │
│  │  ┌──────▼───────┐  ┌──────▼───────┐  ┌──────▼───────┐       │   │
│  │  │ AI + 웹검색  │  │ AI 모델     │  │ AI 모델     │       │   │
│  │  │ 병행        │  │ 분석        │  │ 분석        │       │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                 SYNTHESIS LAYER                              │   │
│  │  • 인사이트 통합                                            │   │
│  │  • 컨셉 생성용 데이터 구조화                               │   │
│  │  • 우선순위 및 적합도 점수 산정                            │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    OUTPUT: ChannelAnalysis                   │   │
│  │  → 컨셉 생성 엔진에 직접 전달                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### 3.1.2 이미지 기반 분석 파이프라인 (핵심 신규)

> **핵심 질문**: 광고 소재는 이미지인데, 어떻게 실제로 분석하는가?

##### 데이터 수집 → Vision AI 분석 → 인사이트 추출 흐름

```
┌─────────────────────────────────────────────────────────────────────┐
│                   이미지 기반 분석 파이프라인                        │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  STEP 1: 실제 광고 이미지 수집                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   외부 광고 라이브러리 API                   │   │
│  │                                                              │   │
│  │  ┌──────────────────┐  ┌──────────────────┐                 │   │
│  │  │ Meta Ad Library  │  │ TikTok Creative  │                 │   │
│  │  │ API              │  │ Center API       │                 │   │
│  │  │                  │  │                  │                 │   │
│  │  │ • FB/IG 광고     │  │ • TikTok 광고    │                 │   │
│  │  │ • 업종별 필터    │  │ • 트렌딩 콘텐츠  │                 │   │
│  │  │ • 기간별 조회    │  │ • 해시태그별     │                 │   │
│  │  └──────────────────┘  └──────────────────┘                 │   │
│  │                                                              │   │
│  │  ┌──────────────────┐  ┌──────────────────┐                 │   │
│  │  │ Google Ads       │  │ 기타 소스        │                 │   │
│  │  │ Transparency     │  │                  │                 │   │
│  │  │                  │  │ • Pinterest Ads  │                 │   │
│  │  │ • YouTube 광고   │  │ • 웹 스크래핑    │                 │   │
│  │  │ • Display 광고   │  │ • 사용자 업로드  │                 │   │
│  │  └──────────────────┘  └──────────────────┘                 │   │
│  │                                                              │   │
│  │  OUTPUT: 광고 이미지 URL 리스트 + 메타데이터                 │   │
│  │  (업종, 플랫폼, 참여율, 기간 등)                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  STEP 2: Vision AI 이미지 분석 (Gemini Vision)                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                              │   │
│  │  각 이미지에 대해 Gemini Vision API 호출:                    │   │
│  │                                                              │   │
│  │  분석 항목:                                                  │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │ 1. 레이아웃 분석                                     │    │   │
│  │  │    • 구성 요소 배치 (제품, 텍스트, 로고 위치)        │    │   │
│  │  │    • 그리드/정렬 패턴                                │    │   │
│  │  │    • 여백 활용                                       │    │   │
│  │  │    • 시선 흐름 (F-패턴, Z-패턴, 중앙집중)           │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │ 2. 비주얼 스타일 분석                                │    │   │
│  │  │    • 색상 팔레트 추출 (주요색, 보조색, 강조색)       │    │   │
│  │  │    • 톤앤무드 (밝음/어두움, 따뜻함/차가움)           │    │   │
│  │  │    • 이미지 스타일 (사진/일러스트/그래픽/3D)         │    │   │
│  │  │    • 필터/효과 감지                                  │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │ 3. 카피/텍스트 분석                                  │    │   │
│  │  │    • OCR로 텍스트 추출                               │    │   │
│  │  │    • 헤드라인 위치/크기/폰트 스타일                  │    │   │
│  │  │    • CTA 버튼 스타일 및 문구                         │    │   │
│  │  │    • 텍스트 비율 (이미지 대비 %)                     │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │ 4. 콘텐츠 요소 분석                                  │    │   │
│  │  │    • 주요 피사체 (사람/제품/배경)                    │    │   │
│  │  │    • 인물 등장 시: 표정, 시선 방향, 포즈             │    │   │
│  │  │    • 제품 표현 방식 (클로즈업/컨텍스트/비포애프터)   │    │   │
│  │  │    • 감정적 어필 요소                                │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  │                                                              │   │
│  │  OUTPUT: ImageAnalysisResult (구조화된 분석 데이터)          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  STEP 3: 패턴 추출 및 통계화                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                              │   │
│  │  N개 이미지 분석 결과를 집계하여:                            │   │
│  │                                                              │   │
│  │  • 가장 많이 사용된 레이아웃 패턴 Top 3                      │   │
│  │  • 트렌딩 색상 팔레트                                        │   │
│  │  • 효과적인 헤드라인 위치/스타일                             │   │
│  │  • 성공 광고의 공통 요소                                     │   │
│  │                                                              │   │
│  │  OUTPUT: VisualTrendPatterns                                 │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  STEP 4: 인사이트 생성 + 근거 제시                                 │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                              │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │ 인사이트                                             │    │   │
│  │  │ "이 채널에서는 비포/애프터 레이아웃이 효과적"        │    │   │
│  │  │                                                      │    │   │
│  │  │ 근거:                                                │    │   │
│  │  │ • 분석한 50개 광고 중 32개(64%)가 이 패턴 사용       │    │   │
│  │  │ • 참여율 상위 10개 중 7개가 이 레이아웃             │    │   │
│  │  │ • [레퍼런스 썸네일 3개 표시]                         │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  │                                                              │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

##### 데이터 소스 상세: 외부 광고 라이브러리 API

| API | 제공 데이터 | 활용 방식 |
|-----|-----------|----------|
| **Meta Ad Library API** | Facebook/Instagram 광고 이미지, 광고주, 기간, 타겟 | 업종+채널 필터링으로 경쟁 광고 수집 |
| **TikTok Creative Center** | TikTok 광고 크리에이티브, 성과 벤치마크 | 트렌딩 광고 스타일 파악 |
| **Google Ads Transparency** | YouTube, Display 광고 | 영상 광고 썸네일 분석 |
| **Pinterest Ads Library** | Pinterest 광고 | 비주얼 중심 플랫폼 트렌드 |

```typescript
// 외부 API 호출 예시
interface AdLibraryQuery {
  platform: 'meta' | 'tiktok' | 'google' | 'pinterest';
  filters: {
    industry?: string;        // "화장품", "F&B" 등
    country?: string;         // "KR"
    date_range?: {
      start: Date;
      end: Date;
    };
    min_impressions?: number; // 성과 좋은 광고만
  };
  limit: number;              // 분석할 광고 수
}

interface AdLibraryResult {
  ads: {
    id: string;
    image_url: string;        // Vision AI 분석용
    video_url?: string;
    advertiser: string;
    start_date: Date;
    platforms: string[];
    estimated_reach?: number;
    engagement_metrics?: {
      likes: number;
      comments: number;
      shares: number;
    };
  }[];
}
```

##### Vision AI (Gemini) 분석 프롬프트 설계

```typescript
// Gemini Vision API 호출 구조
interface VisionAnalysisRequest {
  image_url: string;
  analysis_prompt: string;
}

const AD_ANALYSIS_PROMPT = `
이 광고 이미지를 다음 관점에서 상세히 분석해주세요:

## 1. 레이아웃 분석
- 전체 구성 (그리드 패턴, 섹션 분할)
- 주요 요소 위치 (제품, 텍스트, 로고, CTA)
- 시선 흐름 유도 방식
- 여백 활용도

## 2. 색상 및 톤
- 주요 색상 3가지 (hex 코드로)
- 전체 톤앤무드 (밝은/어두운, 따뜻한/차가운)
- 대비와 강조 방식
- 브랜드 컬러 활용

## 3. 텍스트/카피
- 헤드라인 텍스트 (정확히 추출)
- 서브카피 텍스트
- CTA 문구
- 폰트 스타일 (굵기, 크기 상대적 비율)
- 텍스트가 차지하는 비율 (%)

## 4. 비주얼 스타일
- 이미지 유형 (사진/일러스트/그래픽/혼합)
- 인물 등장 여부 및 표현 방식
- 제품 표현 방식 (클로즈업/라이프스타일/비포애프터)
- 적용된 필터나 효과

## 5. 광고 유형 분류
- 광고 목적 추정 (인지도/전환/참여)
- 타겟 오디언스 추정
- 업종/카테고리 추정

JSON 형식으로 응답해주세요.
`;

// 응답 구조
interface ImageAnalysisResult {
  layout: {
    grid_pattern: string;           // "2-column", "centered", "asymmetric"
    element_positions: {
      product: string;              // "center", "left-third", "bottom"
      headline: string;
      logo: string;
      cta: string;
    };
    visual_flow: string;            // "F-pattern", "Z-pattern", "center-focus"
    whitespace_usage: string;       // "minimal", "moderate", "generous"
  };

  colors: {
    primary: string;                // "#FF5733"
    secondary: string;
    accent: string;
    overall_tone: string;           // "warm-bright", "cool-dark", etc.
    contrast_level: string;         // "high", "medium", "low"
  };

  text: {
    headline: string;               // OCR 추출된 실제 텍스트
    subheadline?: string;
    cta_text?: string;
    font_style: string;             // "bold-sans", "elegant-serif"
    text_ratio_percent: number;     // 이미지 대비 텍스트 비율
  };

  visual_style: {
    image_type: string;             // "photo", "illustration", "graphic", "3d"
    has_person: boolean;
    person_expression?: string;     // "smiling", "serious", "surprised"
    product_presentation: string;   // "closeup", "lifestyle", "before-after"
    filters_effects: string[];      // ["brightness", "saturation", "blur-bg"]
  };

  ad_classification: {
    estimated_goal: string;         // "awareness", "conversion", "engagement"
    estimated_audience: string;     // "young-women", "business-professionals"
    industry: string;               // "cosmetics", "tech", "food"
  };
}
```

##### 근거 타당성 검증 프레임워크 (핵심 고도화)

> **문제**: "분석한 50개 중 64%가 이 패턴" → 이게 정말 의미 있는 근거인가?

###### 1. "성공 광고" 정의의 명확화

```typescript
// 성공 광고 판별 기준 (다층적 정의)
interface SuccessfulAdCriteria {
  // 1차 기준: 플랫폼 메트릭 기반
  platform_metrics: {
    // Meta Ad Library에서 제공하는 지표
    impressions_tier: 'high' | 'medium' | 'low';  // 노출수 티어
    active_duration: number;  // 광고 집행 기간 (일) - 오래 돌린 광고 = 효과 있음

    // TikTok Creative Center 지표
    engagement_score?: number;  // 참여 점수 (0-100)
    viral_score?: number;       // 바이럴 점수
  };

  // 2차 기준: 상대적 성과
  relative_performance: {
    // 같은 업종 내 상위 %
    industry_percentile: number;  // 상위 20% 이내면 "성공"

    // 같은 시기 다른 광고 대비
    temporal_comparison: 'above_average' | 'average' | 'below_average';
  };

  // 3차 기준: 광고 수명
  longevity: {
    // 장기 집행 = 광고주가 성과에 만족
    min_days_active: 14;  // 최소 14일 이상 집행

    // 반복 사용 여부
    is_reused: boolean;   // 같은 광고주가 유사 패턴 재사용
  };
}
```

**핵심 원칙**: "많이 노출된 광고"가 아니라 "오래 집행된 광고"가 성공

| 지표 | 왜 이 지표인가 | 근거 |
|------|---------------|------|
| **광고 집행 기간** | 광고주가 돈을 계속 쓴다 = 성과가 있다 | 실제 비즈니스 성과와 연결 |
| **업종 내 상위 %** | 절대 수치보다 상대 비교가 의미 있음 | 업종별 벤치마크 차이 반영 |
| **패턴 재사용** | 성공한 패턴은 반복됨 | 광고주의 실제 행동이 증거 |

###### 2. 통계적 신뢰도 확보

```
┌─────────────────────────────────────────────────────────────────────┐
│                    분석 샘플 설계                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ❌ 기존: "50개 분석"                                               │
│     → 샘플 크기 불충분, 선택 편향 가능                              │
│                                                                     │
│  ✅ 개선: 계층화 샘플링 + 최소 표본 크기                            │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                              │   │
│  │  업종별 계층화 샘플링                                        │   │
│  │  ┌──────────────────────────────────────────────────────┐   │   │
│  │  │  사용자 업종: "화장품"                                │   │   │
│  │  │                                                       │   │   │
│  │  │  수집 대상:                                           │   │   │
│  │  │  • 직접 경쟁: 화장품 광고 30개                        │   │   │
│  │  │  • 유사 업종: 뷰티/스킨케어 20개                      │   │   │
│  │  │  • 참고 업종: 라이프스타일 10개                       │   │   │
│  │  │  ──────────────────────────────                       │   │   │
│  │  │  총 60개 (업종 관련성 가중치 적용)                    │   │   │
│  │  └──────────────────────────────────────────────────────┘   │   │
│  │                                                              │   │
│  │  시간적 분포                                                 │   │
│  │  ┌──────────────────────────────────────────────────────┐   │   │
│  │  │  • 최근 7일: 20개 (현재 트렌드)                       │   │   │
│  │  │  • 최근 30일: 25개 (안정적 패턴)                      │   │   │
│  │  │  • 최근 90일: 15개 (검증된 패턴)                      │   │   │
│  │  └──────────────────────────────────────────────────────┘   │   │
│  │                                                              │   │
│  │  성과 분포                                                   │   │
│  │  ┌──────────────────────────────────────────────────────┐   │   │
│  │  │  • 상위 20% (성공): 40개 → 성공 요인 추출            │   │   │
│  │  │  • 중위 (평균): 15개 → 기준선 설정                   │   │   │
│  │  │  • 하위 (실패): 5개 → 피해야 할 패턴 식별            │   │   │
│  │  └──────────────────────────────────────────────────────┘   │   │
│  │                                                              │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  신뢰도 표시                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  분석 결과에 신뢰 수준 함께 제시:                            │   │
│  │                                                              │   │
│  │  "비포/애프터 레이아웃이 효과적"                             │   │
│  │  📊 근거 강도: ████████░░ 80%                               │   │
│  │     • 분석 샘플: 60개 (업종 일치 30개)                      │   │
│  │     • 성공 광고 내 사용률: 65%                              │   │
│  │     • 평균 광고 대비 차이: +23%p (통계적 유의)              │   │
│  │                                                              │   │
│  │  vs                                                          │   │
│  │                                                              │   │
│  │  "파란색 CTA 버튼이 효과적"                                  │   │
│  │  📊 근거 강도: ████░░░░░░ 40%                               │   │
│  │     • 분석 샘플: 60개                                       │   │
│  │     • 성공 광고 내 사용률: 35%                              │   │
│  │     • 평균 광고 대비 차이: +5%p (통계적 미유의)             │   │
│  │     ⚠️ 약한 근거 - 참고만 하세요                            │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

###### 3. 상관관계 vs 인과관계 구분

```
┌─────────────────────────────────────────────────────────────────────┐
│             인과관계 추론 강화 방법                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ❌ 위험한 결론:                                                    │
│     "성공 광고의 64%가 비포/애프터 사용"                            │
│     → "비포/애프터를 쓰면 성공한다"                                 │
│                                                                     │
│  ✅ 타당한 추론을 위한 검증 방법:                                   │
│                                                                     │
│  1. 대조군 비교                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  성공 광고 (상위 20%)  vs  평균 광고  vs  실패 광고          │   │
│  │                                                              │   │
│  │  비포/애프터 사용률:                                         │   │
│  │  • 성공 광고: 64% ━━━━━━━━━━━━━━━━━━━━━━━━━━                 │   │
│  │  • 평균 광고: 35% ━━━━━━━━━━━━━━                             │   │
│  │  • 실패 광고: 22% ━━━━━━━━━                                  │   │
│  │                                                              │   │
│  │  차이: +29%p (성공 vs 평균) → 의미 있는 차이 ✓               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  2. 교란변수 통제                                                   │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  "비포/애프터가 효과적인가, 아니면 제품 품질이 좋아서인가?"  │   │
│  │                                                              │   │
│  │  통제 방법:                                                  │   │
│  │  • 같은 광고주의 다른 크리에이티브 비교                     │   │
│  │  • 같은 제품군 내에서만 비교                                │   │
│  │  • 같은 예산 규모 광고끼리 비교                             │   │
│  │                                                              │   │
│  │  통제 후에도 차이가 유지되면 → 인과관계 추론 가능           │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  3. 메커니즘 설명 추가                                              │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  단순 통계 + "왜 효과적인지" 설명                            │   │
│  │                                                              │   │
│  │  "비포/애프터 레이아웃이 효과적입니다"                       │   │
│  │                                                              │   │
│  │  📊 통계적 근거:                                             │   │
│  │     성공 광고 내 64% 사용 (평균 35% 대비 +29%p)             │   │
│  │                                                              │   │
│  │  🧠 심리학적 메커니즘:                                       │   │
│  │     • 사회적 증거: "나도 저렇게 될 수 있다"                 │   │
│  │     • 결과 시각화: 추상적 효과를 구체적으로 보여줌          │   │
│  │     • 인지 용이성: 복잡한 설명 없이 한눈에 이해             │   │
│  │                                                              │   │
│  │  🎯 채널 적합성:                                             │   │
│  │     Instagram: 시각적 플랫폼, 변화 스토리 선호 → 매우 적합  │   │
│  │     TikTok: 빠른 전환, 드라마틱 효과 → 적합                 │   │
│  │     Threads: 텍스트 중심 → 덜 적합                          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

###### 4. 업종별 차별화 분석

```typescript
// 업종별 분석 결과는 별도로 관리
interface IndustrySpecificAnalysis {
  industry: string;  // "화장품", "IT서비스", "F&B" 등

  // 이 업종에서 통계적으로 유의미한 패턴만 저장
  validated_patterns: {
    pattern_name: string;
    usage_in_success: number;    // 성공 광고 내 사용률
    usage_in_average: number;    // 평균 광고 내 사용률
    difference: number;          // 차이 (percentage points)
    statistical_significance: boolean;  // p < 0.05 인지
    confidence_level: number;    // 신뢰 수준 (0-100)
    mechanism_explanation: string;  // 왜 효과적인지
    channel_fit: {
      [channel: string]: 'high' | 'medium' | 'low';
    };
  }[];

  // 이 업종에서 피해야 할 패턴
  anti_patterns: {
    pattern_name: string;
    why_fails: string;
    failure_rate: number;
  }[];

  // 업종 특수 요소
  industry_specific: {
    key_visual_elements: string[];    // 화장품: "클로즈업", "비포애프터", "성분강조"
    avoid_elements: string[];         // "과장표현", "비현실적 효과"
    regulatory_notes?: string[];      // 규제 관련 주의사항
  };

  // 분석 메타데이터
  analysis_metadata: {
    sample_size: number;
    date_range: { start: Date; end: Date };
    platforms_covered: string[];
    last_updated: Date;
  };
}
```

###### 5. 사용자에게 보여주는 "정직한 근거"

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Instagram Feed 트렌드 분석 결과                             │
│     업종: 화장품  |  분석 기간: 2026.01.11 ~ 02.10              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🔥 추천 레이아웃 #1                                            │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  ▌비포/애프터 분할 레이아웃                              │   │
│  │                                                          │   │
│  │  📊 근거 강도: ████████░░ 강함                           │   │
│  │                                                          │   │
│  │  ┌─ 통계적 근거 ─────────────────────────────────────┐  │   │
│  │  │ • 분석 대상: 화장품 광고 60개                      │  │   │
│  │  │ • 성공 광고(상위20%) 내 사용률: 64%               │  │   │
│  │  │ • 평균 광고 내 사용률: 35%                        │  │   │
│  │  │ • 차이: +29%p ✓ 통계적으로 유의미                 │  │   │
│  │  └───────────────────────────────────────────────────┘  │   │
│  │                                                          │   │
│  │  ┌─ 왜 효과적인가 ───────────────────────────────────┐  │   │
│  │  │ 🧠 심리적 메커니즘:                                │  │   │
│  │  │    "변화를 한눈에 보여줘서 제품 효과가 명확함"    │  │   │
│  │  │                                                    │  │   │
│  │  │ 🎯 화장품 업종 적합성:                             │  │   │
│  │  │    피부 변화, 메이크업 전후 → 매우 적합           │  │   │
│  │  └───────────────────────────────────────────────────┘  │   │
│  │                                                          │   │
│  │  📷 레퍼런스:                                            │   │
│  │  ┌────┐ ┌────┐ ┌────┐                                    │   │
│  │  │ 👆 │ │ 👆 │ │ 👆 │  실제 성공 광고 예시              │   │
│  │  └────┘ └────┘ └────┘  (집행 30일+, 상위 20%)           │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ⚠️ 주의: 약한 근거                                            │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  ▌파란색 CTA 버튼                                        │   │
│  │                                                          │   │
│  │  📊 근거 강도: ████░░░░░░ 약함                           │   │
│  │                                                          │   │
│  │  • 성공 광고 내 사용률: 35%                              │   │
│  │  • 평균 광고 내 사용률: 30%                              │   │
│  │  • 차이: +5%p (통계적 유의 수준 미달)                    │   │
│  │                                                          │   │
│  │  💡 해석: 색상보다는 CTA 문구와 위치가 더 중요할 수 있음 │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

##### 근거 제시 방식: 3단계 증거 시스템

```
┌─────────────────────────────────────────────────────────────────────┐
│                       근거 제시 3단계                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  LEVEL 1: 통계적 근거 (기본)                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ "분석한 50개 광고 중 64%가 이 패턴 사용"                    │   │
│  │ "참여율 상위 10개 중 7개가 이 레이아웃"                     │   │
│  │                                                              │   │
│  │ → 숫자로 신뢰성 제공                                        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  LEVEL 2: 레퍼런스 썸네일 (시각적 근거)                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ┌─────┐ ┌─────┐ ┌─────┐                                     │   │
│  │ │     │ │     │ │     │  ← 실제 분석한 광고 썸네일 3개      │   │
│  │ │ Ad1 │ │ Ad2 │ │ Ad3 │                                     │   │
│  │ │     │ │     │ │     │                                     │   │
│  │ └─────┘ └─────┘ └─────┘                                     │   │
│  │ "이런 스타일이 효과적입니다"                                 │   │
│  │                                                              │   │
│  │ → 실제 예시로 직관적 이해                                   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  LEVEL 3: 요소별 분해 (상세 근거)                                   │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 클릭 시 확장:                                                │   │
│  │                                                              │   │
│  │ ✓ 레이아웃: 좌측 제품 + 우측 텍스트 (43%)                   │   │
│  │ ✓ 색상: 밝은 파스텔톤 (58%)                                 │   │
│  │ ✓ 헤드라인: 질문형 시작 (35%)                               │   │
│  │ ✓ CTA: 하단 중앙 배치 (67%)                                 │   │
│  │                                                              │   │
│  │ → 세부 요소별 근거 제공                                     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

##### 사용자 화면에서의 근거 표시 예시

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Instagram Feed 트렌드 분석 결과                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🔥 지금 효과적인 레이아웃                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  1위: 비포/애프터 분할 레이아웃                          │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━ 64%                           │   │
│  │                                                          │   │
│  │  📌 근거:                                                │   │
│  │  • 지난 30일 {업종} 광고 50개 분석                       │   │
│  │  • 참여율 상위 광고의 64%가 이 레이아웃 사용             │   │
│  │  • 평균 참여율: 4.2% (전체 평균 2.1% 대비 2배)          │   │
│  │                                                          │   │
│  │  📷 레퍼런스 예시:                                       │   │
│  │  ┌────┐ ┌────┐ ┌────┐                                    │   │
│  │  │    │ │    │ │    │  "이런 느낌입니다"                 │   │
│  │  │ 👆 │ │ 👆 │ │ 👆 │  (클릭하면 상세 분석 보기)        │   │
│  │  └────┘ └────┘ └────┘                                    │   │
│  │                                                          │   │
│  │  [상세 분석 보기 ▼]                                      │   │
│  │  ┌──────────────────────────────────────────────────┐   │   │
│  │  │ 공통 요소:                                        │   │   │
│  │  │ • 좌측: 사용 전 (어둡고 문제 상황)               │   │   │
│  │  │ • 우측: 사용 후 (밝고 해결된 상황)               │   │   │
│  │  │ • 중앙 구분선 또는 화살표                        │   │   │
│  │  │ • 하단에 브랜드 로고 + CTA                       │   │   │
│  │  └──────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  2위: 중앙 제품 + 주변 텍스트                                   │
│  ━━━━━━━━━━━━━━━━━━━ 48%                                       │
│  ...                                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.1.3 모듈 1: 실시간 트렌드 분석

**데이터 소스**: 외부 광고 라이브러리 API + Vision AI + 웹 검색 병행

```typescript
interface RealtimeTrendAnalysis {
  // 현재 트렌드 포맷
  trending_formats: {
    format: string;           // "비포/애프터", "POV", "말풍선 밈"
    popularity_score: number; // 0-100
    growth_trend: 'rising' | 'stable' | 'declining';
    example_description: string;
    why_it_works: string;     // 왜 이 포맷이 효과적인지
  }[];

  // 트렌딩 해시태그/키워드
  trending_hashtags: {
    tag: string;
    category: 'general' | 'industry' | 'viral';
    volume: 'high' | 'medium' | 'low';
  }[];

  // 트렌딩 사운드/오디오 (TikTok, Reels)
  trending_sounds?: {
    sound_name: string;
    mood: string;
    usage_suggestion: string;
  }[];

  // 트렌드 인사이트 요약
  trend_summary: string;  // "현재 이 채널에서는 ~가 뜨고 있습니다"

  // 데이터 수집 시점
  fetched_at: Date;
  data_sources: ('ai_model' | 'web_search')[];
}
```

**웹 검색 쿼리 예시**:
- `"Instagram 2026 광고 트렌드"`
- `"TikTok viral content trends February 2026"`
- `"{업종} 인스타그램 성공 광고 사례"`

#### 3.1.3 모듈 2: 경쟁사/성공사례 분석

```typescript
interface CompetitorSuccessAnalysis {
  // 같은 업종 성공 사례
  industry_success_cases: {
    brand_type: string;        // "화장품 브랜드", "F&B 브랜드"
    content_style: string;     // "감성적 스토리텔링"
    key_elements: string[];    // ["비포/애프터", "UGC 활용", "인플루언서"]
    estimated_engagement: string;
    why_successful: string;    // 성공 요인 분석
    applicable_to_user: string; // 사용자에게 어떻게 적용 가능한지
  }[];

  // 채널별 Top 퍼포밍 콘텐츠 패턴
  top_performing_patterns: {
    pattern: string;           // "3초 훅 + 문제제기 + 솔루션"
    average_engagement: number;
    best_for: string[];        // ["인지도", "전환"]
  }[];

  // 피해야 할 안티패턴
  anti_patterns: {
    pattern: string;
    why_fails: string;
  }[];

  // 차별화 기회
  differentiation_opportunities: string[];
}
```

#### 3.1.4 모듈 3: 타겟 오디언스 심층 분석

```typescript
interface TargetAudienceDeepAnalysis {
  // 채널 내 타겟 행동 패턴
  channel_behavior: {
    active_hours: string[];           // ["19:00-22:00", "점심시간"]
    content_preference: string[];     // ["짧은 영상", "캐러셀"]
    interaction_style: string;        // "수동적 소비" vs "적극적 참여"
    decision_trigger: string[];       // ["사회적 증거", "한정 혜택"]
  };

  // 심리적 프로파일
  psychological_profile: {
    primary_motivation: string;       // "자기표현", "정보획득", "엔터테인먼트"
    pain_points: string[];
    aspirations: string[];
    content_that_resonates: string[]; // 공감하는 콘텐츠 유형
    content_that_annoys: string[];    // 거부감 느끼는 콘텐츠
  };

  // 구매 여정 상 위치
  purchase_journey_stage: {
    likely_stage: 'awareness' | 'consideration' | 'decision' | 'loyalty';
    recommended_approach: string;
    content_type_for_stage: string;
  };

  // 세대/문화적 맥락
  cultural_context: {
    generation_traits: string[];      // MZ세대 특성
    current_zeitgeist: string[];      // 시대정신
    relevant_memes_trends: string[];  // 관련 밈/트렌드
  };
}
```

#### 3.1.5 분석 결과 → 컨셉 생성 연결

**핵심: 분석 결과가 컨셉에 직접 반영되는 구조**

```typescript
interface ChannelAnalysisResult {
  // 3개 모듈의 통합 결과
  realtime_trends: RealtimeTrendAnalysis;
  competitor_analysis: CompetitorSuccessAnalysis;
  target_audience: TargetAudienceDeepAnalysis;

  // 컨셉 생성을 위한 가공된 인사이트
  concept_generation_inputs: {
    // 추천 컨셉 방향 (분석 기반)
    recommended_directions: {
      direction: string;          // "비포/애프터 변신"
      reasoning: string;          // "타겟이 ~를 선호하고, 현재 ~가 트렌드이므로"
      confidence_score: number;   // 0-100
      source_insights: string[];  // 어떤 분석 결과에서 도출됐는지
    }[];

    // 사용해야 할 요소
    must_include: {
      visual_elements: string[];  // ["밝은 색감", "텍스트 오버레이"]
      copy_elements: string[];    // ["질문형 훅", "이모지"]
      format_elements: string[];  // ["세로형", "15초 이내"]
    };

    // 피해야 할 요소
    must_avoid: string[];

    // 채널 적합도 높은 훅 유형
    recommended_hooks: {
      hook_type: string;
      example: string;
      effectiveness_score: number;
    }[];

    // 추천 해시태그 세트
    hashtag_recommendations: {
      primary: string[];    // 필수 포함
      secondary: string[];  // 선택적
      trending: string[];   // 현재 트렌딩
    };
  };

  // 메타 정보
  analysis_quality_score: number;  // 분석 신뢰도
  data_freshness: Date;
}
```

#### 3.1.6 채널별 분석 특화 요소

| 채널 | 특화 분석 요소 | 웹 검색 키워드 |
|------|---------------|---------------|
| **Instagram Feed** | 그리드 미학, 캐러셀 최적 장수, 릴스 연계 | "인스타그램 피드 광고 2026 트렌드" |
| **Instagram Stories** | 인터랙티브 스티커 활용, 스와이프업 전환율 | "인스타 스토리 광고 성공 사례" |
| **TikTok** | 트렌딩 사운드, 챌린지 연계, 듀엣/스티치 기회 | "틱톡 바이럴 광고 패턴 2026" |
| **YouTube Shorts** | 썸네일 CTR, 제목 공식, 구독 전환 | "유튜브 쇼츠 알고리즘 2026" |
| **Threads** | 바이럴 텍스트 패턴, 리포스트 유도 | "스레드 마케팅 성공 사례" |
| **Facebook Ads** | 타겟팅 조합, 광고 피로도, 예산 효율 | "페이스북 광고 2026 best practice" |

#### 3.1.7 분석 → 컨셉 파이프라인

```
분석 결과                           컨셉 생성
─────────────────────────────────────────────────────────
[트렌드: 비포/애프터 인기]  ──┐
                            ├──▶ 컨셉 A: "변신 스토리"
[성공사례: UGC 스타일]      ──┘     - 적합도: 95%
                                    - 근거: 트렌드+성공사례

[타겟: 자기표현 욕구]       ──┐
                            ├──▶ 컨셉 B: "나만의 스타일"
[트렌드: 개인화 콘텐츠]     ──┘     - 적합도: 88%
                                    - 근거: 타겟심리+트렌드

[성공사례: 문제해결형]      ──┐
                            ├──▶ 컨셉 C: "고민 해결사"
[타겟: 실용성 중시]         ──┘     - 적합도: 82%
                                    - 근거: 성공사례+타겟
```

#### 3.1.8 사용자에게 보여주는 분석 결과 (UI)

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Instagram Feed 완전 정복 가이드                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🔥 지금 이 채널에서 뜨는 것들                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 트렌드 포맷                                              │   │
│  │ • 비포/애프터 (인기도 95↑)  "변화를 보여주는 콘텐츠"    │   │
│  │ • 캐러셀 스토리텔링 (인기도 88)  "스와이프 유도"        │   │
│  │ • 미니멀 타이포그래피 (인기도 75)                        │   │
│  │                                                          │   │
│  │ 트렌딩 해시태그                                          │   │
│  │ #일상기록 #오늘의추천 #꿀팁공유 #변화스타그램            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ✅ 비슷한 업종 성공 사례                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ "{입력한 업종}" 브랜드들의 성공 패턴                     │   │
│  │                                                          │   │
│  │ 📌 공통 성공 요소:                                       │   │
│  │    • 실제 사용 후기 스타일 (UGC 느낌)                   │   │
│  │    • 첫 이미지에서 호기심 유발                          │   │
│  │    • 저장 유도 CTA 활용                                 │   │
│  │                                                          │   │
│  │ 💡 당신의 브랜드에 적용하면:                             │   │
│  │    "제품 사용 전/후를 보여주는 캐러셀이 효과적"         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  🎯 타겟 오디언스 인사이트                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ {입력한 타겟}의 이 채널 행동 패턴                        │   │
│  │                                                          │   │
│  │ • 주 활동 시간: 저녁 7-10시, 점심시간                   │   │
│  │ • 선호 콘텐츠: 영감을 주는 비주얼, 실용적 정보          │   │
│  │ • 행동 트리거: "나도 할 수 있을 것 같은" 느낌           │   │
│  │ • 거부감: 과장된 광고, 강압적 CTA                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  💡 AI 추천: 이 채널에서는 "감성적 스토리텔링"이 효과적입니다  │
│                                                                 │
│                              [분석 기반 컨셉 생성하기 →]        │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 채널 네이티브 소재 생성

**기존** (해상도만 다름):
```
Instagram: 1080x1080 이미지 + 일반 카피
TikTok: 1080x1920 이미지 + 일반 카피
```

**개선** (채널 특성 완전 반영):
```
Instagram Feed:
- 이미지: 그리드 일관성 고려한 색감, 미니멀/감성 스타일
- 카피: 스토리텔링형, 이모지 적절히, 해시태그 믹스
- 추가: 캐러셀 제안, 릴스 전환 가이드

TikTok:
- 이미지/영상: 세로 풀화면, 텍스트 오버레이, 빠른 전환
- 카피: 훅 강조, 트렌드 해시태그, 챌린지 연계 제안
- 추가: 추천 사운드, 듀엣 유도 전략
```

### 3.3 품질 향상 요소

| 영역 | 현재 | 개선 |
|------|------|------|
| **이미지 생성** | 일반 프롬프트 | 채널별 스타일 가이드 반영 프롬프트 |
| **카피 생성** | 길이만 조절 | 채널별 톤, 포맷, 해시태그 전략 |
| **포맷** | 해상도만 | 캐러셀, 스토리 시퀀스, 섬네일+본문 등 |
| **검수** | 없음 | 채널 가이드라인 자동 체크 |

## 4. 기술적 변경사항

### 4.1 데이터 모델 변경

```typescript
// 새로운: 채널 프로필 확장
interface ChannelProfile {
  id: string;
  name: string;

  // 기존
  dimensions: Dimension[];

  // 신규 추가
  algorithm_insights: {
    optimal_length: string;
    peak_times: string[];
    engagement_factors: string[];
  };

  content_trends: {
    current_formats: string[];
    popular_styles: string[];
    trending_sounds?: string[];  // TikTok, Reels
  };

  copy_guidelines: {
    tone: string;
    length: { min: number; max: number };
    hashtag_strategy: string;
    cta_style: string;
  };

  creative_requirements: {
    text_safe_zone: boolean;
    recommended_filters: string[];
    avoid_elements: string[];
  };
}

// 캠페인 모델 변경
interface Campaign {
  // 기존
  id: string;
  brand_name: string;
  product_description: string;

  // 변경: 단일 채널
  platform: Platform;  // 복수 → 단일

  // 신규
  channel_analysis: ChannelAnalysis;
  generated_for_channel: Platform;
}
```

### 4.2 API 변경

| 기존 API | 변경 |
|----------|------|
| `POST /api/campaigns` | `platform` 배열 → 단일 값 |
| `POST /api/campaigns/:id/analyze` | **완전 재설계** - 3개 모듈 병렬 분석 |
| `POST /api/concepts/:id/generate` | 분석 결과 기반 컨셉 생성 |
| **신규** `GET /api/channels/:id/trends` | 채널별 실시간 트렌드 (웹검색 포함) |
| **신규** `POST /api/campaigns/:id/derive` | 다른 채널 버전 파생 생성 |

#### 4.2.1 분석 API 상세 설계

```typescript
// POST /api/campaigns/:id/analyze
// 새로운 분석 API 구조

interface AnalyzeRequest {
  // 기본 정보 (campaigns 테이블에서)
  campaign_id: string;

  // 추가 컨텍스트 (선택적)
  industry?: string;           // 업종 (성공사례 검색용)
  competitor_keywords?: string[]; // 경쟁사 키워드
}

interface AnalyzeResponse {
  success: boolean;
  data: {
    // 3개 모듈 분석 결과
    realtime_trends: RealtimeTrendAnalysis;
    competitor_analysis: CompetitorSuccessAnalysis;
    target_audience: TargetAudienceDeepAnalysis;

    // 컨셉 생성용 가공 데이터
    concept_inputs: ConceptGenerationInputs;

    // 메타 정보
    analysis_id: string;
    analysis_quality: number;
    data_sources: string[];
    cached: boolean;
  };
}
```

#### 4.2.2 분석 → 컨셉 파이프라인 API

```typescript
// POST /api/campaigns/:id/concepts
// 분석 결과를 자동 활용하는 컨셉 생성

interface GenerateConceptsRequest {
  campaign_id: string;
  analysis_id: string;  // 연결된 분석 결과

  // 사용자 피드백 (선택적)
  preferred_direction?: string;  // "비포/애프터", "감성적" 등
  exclude_patterns?: string[];   // 피하고 싶은 패턴
}

interface GenerateConceptsResponse {
  concepts: {
    title: string;
    description: string;

    // 분석 기반 적합도
    channel_fit_score: number;  // 0-100
    reasoning: string;          // 왜 이 컨셉이 적합한지
    based_on: string[];         // 어떤 분석 결과에서 도출됐는지

    // 채널 최적화 요소
    recommended_hook: string;
    recommended_format: string;
    hashtag_set: string[];

    // 미리보기
    preview_prompt: string;     // 이미지 생성용 프롬프트
  }[];
}

### 4.3 UI 변경

| 화면 | 변경 내용 |
|------|----------|
| **Step 1** | 플랫폼 복수 선택 → 채널 단일 선택 (카드 UI) |
| **Step 2** | 채널 심층 분석 결과 전용 화면 |
| **Step 3** | 간소화된 브랜드 입력 + AI 추천 |
| **Step 4** | 채널 맞춤 컨셉 (적합도 표시) |
| **Step 5** | 채널 네이티브 소재 + 예상 성과 |
| **Step 6** | 다른 채널 파생 생성 CTA |

## 5. 성공 지표

### 5.1 핵심 KPI

| 지표 | 현재 | 목표 |
|------|------|------|
| **채널 적합도 평가** | 측정 안함 | 4.5/5.0 |
| **소재 수정 요청률** | 높음 (추정) | 30% 감소 |
| **다른 채널 추가 생성률** | - | 40% |
| **재방문율** | 40% | 60% |
| **소재 실제 활용률** | 60% | 80% |

### 5.2 품질 지표

| 지표 | 기준 |
|------|------|
| 채널 가이드라인 준수율 | 95% 이상 |
| 이미지 품질 점수 | 4.0/5.0 이상 |
| 카피 적합성 점수 | 4.0/5.0 이상 |

## 6. 구현 우선순위

### Phase 1: 분석 엔진 고도화 (MVP 핵심)

> **목표**: 분석 결과가 컨셉 생성에 직접 반영되는 파이프라인 구축

#### 1-0. 이미지 분석 인프라 (선행 작업)

| 순서 | 작업 | 설명 |
|------|------|------|
| 0-1 | **광고 라이브러리 API 연동** | Meta Ad Library, TikTok Creative Center API 통합 |
| 0-2 | **Gemini Vision API 연동** | 이미지 분석용 Vision AI 서비스 구축 |
| 0-3 | **이미지 분석 파이프라인** | 수집 → Vision 분석 → 패턴 추출 → 인사이트 |
| 0-4 | **근거 타당성 검증 시스템** | 성공 정의, 대조군 비교, 신뢰도 계산 |
| 0-5 | **분석 결과 캐싱** | 업종별 결과 캐싱, 비용 절감 |

#### 1-0-4. 근거 타당성 검증 시스템 상세

```typescript
// 분석 결과의 신뢰도를 계산하는 로직
interface EvidenceValidation {
  // 1. 성공 광고 정의
  success_criteria: {
    min_active_days: 14;        // 최소 14일 이상 집행
    performance_tier: 'top_20_percent';
    same_advertiser_reuse: boolean;
  };

  // 2. 샘플 설계
  sampling: {
    total_sample: 60;
    industry_direct: 30;        // 직접 경쟁
    industry_adjacent: 20;      // 유사 업종
    industry_reference: 10;     // 참고 업종

    time_distribution: {
      recent_7d: 20;
      recent_30d: 25;
      recent_90d: 15;
    };

    performance_distribution: {
      success: 40;              // 상위 20%
      average: 15;              // 중위
      failure: 5;               // 하위
    };
  };

  // 3. 통계적 검증
  statistical_validation: {
    // 성공 광고 vs 평균 광고 차이 계산
    calculate_difference: (pattern: string) => {
      success_rate: number;     // 성공 광고 내 사용률
      average_rate: number;     // 평균 광고 내 사용률
      difference_pp: number;    // 차이 (percentage points)
      is_significant: boolean;  // p < 0.05 인지
    };

    // 신뢰도 점수 (0-100)
    confidence_score: number;
    confidence_factors: string[];  // 신뢰도에 영향 준 요소들
  };

  // 4. 메커니즘 설명
  mechanism: {
    psychological_basis: string;   // 심리학적 근거
    channel_fit_reason: string;    // 채널 적합성 이유
    industry_fit_reason: string;   // 업종 적합성 이유
  };
}

// 사용자에게 보여줄 때의 신뢰도 표시
interface EvidencePresentation {
  strength: 'strong' | 'moderate' | 'weak';
  strength_bar: string;  // "████████░░" (80%)

  // 강한 근거일 때
  if_strong: {
    show_as: '추천';
    show_statistics: true;
    show_mechanism: true;
    show_references: 3;
  };

  // 약한 근거일 때
  if_weak: {
    show_as: '참고';
    show_warning: "약한 근거 - 참고만 하세요";
    show_alternative: "대신 X가 더 검증됨";
  };
}
```

#### 1-1. 분석 모듈 구현 (핵심)

| 순서 | 작업 | 설명 |
|------|------|------|
| 1 | **실시간 트렌드 분석 모듈** | 광고 이미지 수집 + Vision AI 분석 + 패턴 추출 |
| 2 | **경쟁사/성공사례 분석 모듈** | 업종별 광고 이미지 분석 + 성공 요소 추출 |
| 3 | **타겟 오디언스 심층 분석 모듈** | 채널 내 타겟 행동/심리 분석 (AI 기반) |
| 4 | **분석 통합 레이어** | 3개 모듈 결과 → 컨셉 생성용 데이터 |

#### 1-2. 분석 → 컨셉 연결

| 순서 | 작업 | 설명 |
|------|------|------|
| 5 | **ConceptGenerationInputs 구조** | 분석 결과를 컨셉 생성 입력으로 변환 |
| 6 | **컨셉 생성 프롬프트 재설계** | 분석 인사이트를 프롬프트에 주입 |
| 7 | **적합도 점수 산정 로직** | 왜 이 컨셉인지 근거 제시 |

#### 1-3. UI/워크플로우 변경

| 순서 | 작업 | 설명 |
|------|------|------|
| 8 | **채널 단일 선택 UI** | 복수 → 단일 선택 |
| 9 | **분석 결과 표시 화면** | 3개 모듈 결과 시각화 |
| 10 | **컨셉 카드 UI 개선** | 적합도/근거 표시 |

### Phase 2: 품질 향상

1. **웹 검색 정확도 개선** - 쿼리 최적화, 결과 필터링
2. **채널별 이미지 스타일 가이드** - 프롬프트 템플릿 고도화
3. **채널별 카피 톤앤매너** - 분석 결과 반영
4. **분석 캐싱 시스템** - 동일 조건 재분석 방지

### Phase 3: 확장

1. **다른 채널 파생 생성** - 분석 결과 재활용
2. **트렌드 자동 업데이트** - 주기적 백그라운드 수집
3. **A/B 테스트 제안** - 분석 기반 변형 제안
4. **성과 예측 분석** - 벤치마크 데이터 활용

## 7. 리스크 및 대응

| 리스크 | 영향 | 대응 |
|--------|------|------|
| 단일 채널 선택으로 사용 감소 | 중간 | "다른 채널 추가" 기능으로 보완 |
| 채널 분석 정확도 | 높음 | 주기적 트렌드 데이터 업데이트 |
| 개발 범위 증가 | 중간 | Phase 나눠서 점진적 구현 |

## 8. 타임라인

| Phase | 범위 | 예상 |
|-------|------|------|
| **Phase 1** | MVP 핵심 변경 | Design → Do → Check |
| **Phase 2** | 품질 향상 | 별도 PDCA 사이클 |
| **Phase 3** | 확장 기능 | 별도 PDCA 사이클 |

---

## 9. 핵심 결정 사항 요약

### 분석 고도화 핵심 결정

| 결정 사항 | 선택 | 이유 |
|----------|------|------|
| **분석 핵심 영역** | 실시간 트렌드 + 경쟁사/성공사례 + 타겟 오디언스 | 3가지 모두 컨셉 품질에 직접 영향 |
| **분석 결과 활용** | 컨셉 자동 생성에 직접 반영 | 사용자가 판단하지 않아도 최적 컨셉 제안 |
| **데이터 소스** | 외부 광고 라이브러리 API | 실제 광고 이미지 수집 가능 |
| **Vision AI** | Google Gemini Vision | 이미지 레이아웃/색상/카피 분석 |

### 이미지 분석 파이프라인 (핵심 신규)

```
[광고 라이브러리 API] → [이미지 수집] → [Gemini Vision 분석] → [패턴 추출] → [근거 제시]
      │                     │                  │                   │              │
      ├─ Meta Ad Library    ├─ 업종 필터       ├─ 레이아웃         ├─ 통계화      ├─ 숫자 근거
      ├─ TikTok Creative    ├─ 성과 필터       ├─ 색상 팔레트      ├─ Top 패턴    ├─ 썸네일 예시
      └─ Google Ads         └─ 기간 필터       ├─ 카피 OCR         └─ 공통 요소   └─ 상세 분해
                                               └─ 비주얼 스타일
```

### 근거 타당성 검증 체계 (핵심 고도화)

| 검증 영역 | 방법 | 적용 |
|----------|------|------|
| **성공 정의** | 집행기간 14일+, 업종 상위 20%, 패턴 재사용 | 단순 노출수 대신 실제 비즈니스 성과 기준 |
| **샘플 설계** | 업종별 계층화 60개 (직접 30 + 유사 20 + 참고 10) | 편향 방지, 업종 특성 반영 |
| **대조군 비교** | 성공 vs 평균 vs 실패 광고 비교 | 상관관계 → 인과관계 추론 |
| **신뢰도 표시** | 강함/보통/약함 + 근거 강도 바 | 사용자에게 정직한 정보 제공 |
| **메커니즘 설명** | "왜 효과적인가" 심리학적 근거 | 숫자만이 아닌 이해 가능한 설명 |

### 근거 제시 3단계 시스템

| 레벨 | 내용 | 예시 |
|------|------|------|
| **Level 1** | 통계적 근거 + 신뢰도 | "성공 광고 64% vs 평균 35% → +29%p (강한 근거)" |
| **Level 2** | 레퍼런스 썸네일 | 실제 성공 광고 이미지 3개 (집행 30일+) |
| **Level 3** | 요소별 분해 + 메커니즘 | 레이아웃/색상 각각 % + "왜 효과적인지" |

### 전체 아키텍처

```
[채널 선택] → [광고 이미지 수집] → [Vision AI 분석] → [패턴 추출] → [컨셉 생성]
                    │                     │                │              │
                    │              [레이아웃 분석]         │        [적합도 점수]
                    │              [색상 분석]             │        [근거 설명]
                    │              [카피 OCR]              │        [레퍼런스 포함]
                    │              [비주얼 스타일]         │
                    │                     │                │
                    └─────────────────────┴────────────────┘
                              인사이트 통합 레이어
```

---

## 문서 정보

| 항목 | 값 |
|------|---|
| **버전** | 2.0 |
| **생성일** | 2026-02-10 |
| **작성자** | AI + Human |
| **상태** | Draft - 분석 고도화 설계 완료 |
| **이전 버전** | v1.0 (아카이브됨) |
| **핵심 변경** | 분석 엔진 3개 모듈 설계, 분석→컨셉 파이프라인 |
